FROM golang:1.11

ARG GOOS=linux
ARG GOARCH=amd64
ARG CGO_ENABLED=0
ARG GO111MODULE=on

ENV GOOS=$GOOS
ENV GOARCH=$GOARCH
ENV CGO_ENABLED=$CGO_ENABLED
ENV GO111MODULE=$GO111MODULE

WORKDIR /go/src/github.com/charter-oss/barrelman
COPY . .
RUN go mod tidy
